# Stockfellow Environment Configuration
# Copy this file to .env and update the values accordingly
# DO NOT commit .env to version control!

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL (Keycloak Database)
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password

# PostgreSQL (Notification Service Database)
NOTIFICATION_POSTGRES_DB=notification_db
NOTIFICATION_POSTGRES_USER=notification_user
NOTIFICATION_POSTGRES_PASSWORD=notification_pass

# MongoDB (Group Services)
GROUP_SERVICE_MONGODB_URI=mongodb+srv://devoppscapstone:TPXLQ2laAnNrqQA3@cluster0.mhunonh.mongodb.net/groups_stokvel_db?retryWrites=true&w=majority&appName=Cluster0

# Transaction Service Database (PostgreSQL/Supabase)
TRANSACTIONDB_URI=jdbc:postgresql://aws-0-eu-central-1.pooler.supabase.com:6543/postgres?sslmode=require&prepareThreshold=0&preparedStatementCacheQueries=0&preparedStatementCacheSizeMiB=0
TRANSACTIONDB_USER=postgres.lcrdisuesrfbohqvudus
TRANSACTIONDB_PASS=DevOpps123@

# =============================================================================
# KEYCLOAK CONFIGURATION
# =============================================================================

# Keycloak Admin Credentials
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak Database Connection
KC_DB=postgres
KC_DB_URL=jdbc:postgresql://postgres:5432/keycloak
KC_DB_USERNAME=keycloak
KC_DB_PASSWORD=password

# Keycloak Realm Configuration
KEYCLOAK_REALM=stockfellow
KEYCLOAK_AUTH_SERVER_URL=http://keycloak:8080/
KEYCLOAK_ISSUER=http://keycloak:8080/realms/stockfellow
KEYCLOAK_JWKS_URI=http://keycloak:8080/realms/stockfellow/protocol/openid-connect/certs

# =============================================================================
# KEYCLOAK CLIENT CONFIGURATION
# =============================================================================

# API Gateway Client (Confidential)
KEYCLOAK_GATEWAY_CLIENT_ID=api-gateway-client
KEYCLOAK_GATEWAY_CLIENT_SECRET=CCoz2FCbBYKshvsxHQrTsIbyUlr4Vqad

# Frontend Client (Public)
KEYCLOAK_FRONTEND_CLIENT_ID=public-client
KEYCLOAK_FRONTEND_REDIRECT_URI=http://localhost:3000/auth/callback

# Admin Client
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_ADMIN_REALM=master
KEYCLOAK_ADMIN_CLIENT_ID=admin-cli

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

REDIS_HOST=redis
REDIS_PORT=6379

# =============================================================================
# ACTIVEMQ CONFIGURATION
# =============================================================================

ACTIVEMQ_BROKER_URL=tcp://activemq:61616
ACTIVEMQ_USER=admin
ACTIVEMQ_PASSWORD=admin

# =============================================================================
# SERVICE PORTS
# =============================================================================

# API Gateway
API_GATEWAY_PORT=3000
API_GATEWAY_DEBUG_PORT=5007

# User Service
USER_SERVICE_PORT=4020
USER_SERVICE_DEBUG_PORT=5005

# Group Service
GROUP_SERVICE_PORT=4040
GROUP_SERVICE_DEBUG_PORT=5006

# Transaction Service
TRANSACTION_SERVICE_PORT=4080

# Notification Service
NOTIFICATION_SERVICE_PORT=4050
NOTIFICATION_SERVICE_DEBUG_PORT=5008

# External Services
POSTGRES_PORT=5432
REDIS_PORT=6379
# KEYCLOAK_PORT=8180

# =============================================================================
# WEBAUTHN SERVICE CONFIGURATION
# =============================================================================

WEBAUTHN_SERVICE_PORT=4090
WEBAUTHN_SERVICE_DEBUG_PORT=5010
WEBAUTHN_SERVICE_SPRING_PROFILE=docker
WEBAUTHN_SERVICE_JVM_OPTS=-Xmx256m -Xms128m

# WebAuthn Configuration
WEBAUTHN_RELYING_PARTY_NAME=StockFellow
WEBAUTHN_RELYING_PARTY_ID=localhost
WEBAUTHN_ORIGIN=http://localhost:3000
WEBAUTHN_CHALLENGE_TIMEOUT=300000

# =============================================================================
# SERVICE URLS (Internal Communication)
# =============================================================================

USER_SERVICE_URL=http://user-service:4020
GROUP_SERVICE_URL=http://group-service:4040
TRANSACTION_SERVICE_URL=http://transaction-service:4080
NOTIFICATION_SERVICE_URL=http://notification-service:4050
KEYCLOAK_SERVICE_URL=http://keycloak:8080
PAYSTACK_CALLBACK_URL=https://logically-immense-peacock.ngrok-free.app/api/transaction/payment-methods/payer/callback

# =============================================================================
# SPRING PROFILES
# =============================================================================

SPRING_PROFILES_ACTIVE=docker
USER_SERVICE_SPRING_PROFILE=development
GROUP_SERVICE_SPRING_PROFILE=docker
TRANSACTION_SERVICE_SPRING_PROFILE=docker
NOTIFICATION_SERVICE_SPRING_PROFILE=docker

# =============================================================================
# JVM CONFIGURATION
# =============================================================================

# JVM Memory Settings
JVM_OPTS=-Xmx512m -Xms256m
USER_SERVICE_JVM_OPTS=-Xmx256m -Xms128m
GROUP_SERVICE_JVM_OPTS=-Xmx256m -Xms128m
TRANSACTION_SERVICE_JVM_OPTS=-Xmx256m -Xms128m
NOTIFICATION_SERVICE_JVM_OPTS=-Xmx256m -Xms128m

# Debug Settings (set to empty string to disable debugging)
JAVA_DEBUG_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005
# JAVA_DEBUG_OPTS=

# =============================================================================
# ENVIRONMENT SPECIFIC
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# External API URLs (for production)
EXTERNAL_KEYCLOAK_URL=https://auth.stockfellow.com
EXTERNAL_API_URL=https://api.stockfellow.com
PAYSTACK_API_URL=https://api.paystack.co
PAYSTACK_TEST_API_KEY=sk_test_e197cd066ea748f913682cc43169aadd279e10f4

# =============================================================================
# SECURITY & SECRETS
# =============================================================================

NGROK_AUTHTOKEN=30HHuTxEDRJGxqialdqHo9TdtHp_3XgtW9wbYDEtDzXGpJ2bK
NGROK_HOSTNAME=logically-immense-peacock.ngrok-free.app
NGROK_DOMAIN=https://logically-immense-peacock.ngrok-free.app

# =============================================================================
# SECURITY & SECRETS
# =============================================================================

# JWT Configuration
JWT_SECRET=your_very_secure_jwt_secret_key_here_should_be_at_least_256_bits
JWT_EXPIRATION=86400

# Encryption Keys
ENCRYPTION_KEY=your_encryption_key_here
ENCRYPTION_SALT=your_encryption_salt_here

# =============================================================================
# LOGGING
# =============================================================================

LOG_LEVEL=INFO
ROOT_LOG_LEVEL=WARN
KEYCLOAK_LOG_LEVEL=INFO

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# =============================================================================
# VOLUME CONFIGURATION
# =============================================================================

# Data persistence paths (for production)
POSTGRES_DATA_PATH=./data/postgres
MONGODB_DATA_PATH=./data/mongodb
REDIS_DATA_PATH=./data/redis
KEYCLOAK_DATA_PATH=./data/keycloak

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Hot reload settings
ENABLE_HOT_RELOAD=true
WATCH_FILES=true

# Debug mode
DEBUG_MODE=true
VERBOSE_LOGGING=false

# =============================================================================
# EMAIL CONFIGURATION (MFA)
# =============================================================================

MFA_MAIL_HOST=smtp.gmail.com
MFA_MAIL_PORT=587
MFA_MAIL_USERNAME=devopps.capstone@gmail.com
MFA_MAIL_PASSWORD=ywkaalmvpxivdfmy
MFA_MAIL_FROM=devopps.capstone@gmail.com
MFA_MAIL_STARTTLS=true
MFA_MAIL_SSL=false

MFA_SERVICE_PORT=8087
MFA_SPRING_PROFILES_ACTIVE=dev